
<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Spotlight Control Demo - Press any key to swap cameras</title>
		<style>
			body {
				margin: 0;
				background-color: #fff;
				overflow: hidden;
			}
		</style>
		<script src="js/three.min.js"></script>
	</head>
	<body>
		<script>
// WithBug - R69
'use strict';

var dx  = 620;
var x_p = 0;
var z_p = 0;
var y_p = 10;

var scene, camera, orthoCamera, perspectiveCamera, renderer, spotLight;
var geometry, material, mesh;
var spotter;

init();
animate();

function switchCamera() {
    if ( camera instanceof THREE.PerspectiveCamera )
        camera = orthoCamera;
    else
        camera = perspectiveCamera;
    resizeCamera();
}

function resizeCamera() {
    renderer.setSize( window.innerWidth, window.innerHeight);
    var aspect = window.innerWidth / window.innerHeight;
    if ( camera instanceof THREE.PerspectiveCamera )
        camera.aspect = aspect;
    else {
        var dy = 620 / aspect;
        camera.left   = -310;
        camera.right  =  310;
        camera.top    =  0.5 * dy;
        camera.bottom = -0.5 * dy;
    }
    camera.updateProjectionMatrix();
}

function init() {
    scene = new THREE.Scene();

    renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);

    var target = new THREE.Object3D();
    target.position.set( 0, 0, 0);

    perspectiveCamera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
    perspectiveCamera.position.z = 200;
    perspectiveCamera.position.y = 200;
    perspectiveCamera.lookAt( target.position);
    scene.add( perspectiveCamera);

    orthoCamera = new THREE.OrthographicCamera( -300, 300, 600, -600, -500, 500);
    orthoCamera.position.y = 200;
    orthoCamera.position.z = 0;
    orthoCamera.lookAt( target.position);
    scene.add( orthoCamera);

    camera = perspectiveCamera;
    resizeCamera();

    var helper = new THREE.AxisHelper( 100);
    helper.translateY( .1);
    scene.add( helper);

    var planeGeo = new THREE.PlaneGeometry(600,900);
    var planeMaterial = new THREE.MeshPhongMaterial( { color: 0xff0000, specular: 0x112211, shininess: 5, wireframe: false } );
    planeMaterial.side = THREE.DoubleSide;
    var planeMesh = new THREE.Mesh( planeGeo, planeMaterial);
    planeMesh.rotation.x = Math.PI * .5;
    scene.add( planeMesh );

    spotLight = new THREE.SpotLight( 0xffffff, 5, 90, Math.PI / 6, 10);
    spotLight.position.set( 0, y_p, 0 );
    spotLight.target.position.set( 0, 0, 0 );
    spotLight.penumbra = .2;
    scene.add( spotLight );
    scene.add( spotLight.target);
    spotter = new THREE.SpotLightHelper( spotLight);
    scene.add( spotter);

    var ambientLight = new THREE.AmbientLight( 0x777777 );
    scene.add( ambientLight );

    document.body.appendChild(renderer.domElement);
    window.addEventListener("resize", resizeCamera);
    window.addEventListener("keydown", switchCamera);
}

function animate() {

    requestAnimationFrame( animate );
    spotter.update();

    x_p += 0.3;
    if ( x_p >= 250)
        x_p = -250;
    y_p += 0.1;
    if ( y_p >= 100 )
        y_p = 0.1;
    z_p += 0.2;
    if ( z_p >= 100)
        z_p = -100;

    spotLight.position.set( x_p, y_p, z_p);
    spotLight.target.position.set( x_p, 0, z_p);
    //spotLight.target.updateMatrixWorld();

    renderer.render( scene, camera );
}
		</script>
	</body>
</html>